<!doctype html><html lang=en-us>
<head>
<title>🏗️ How this blog was set up // My Tech Blog (EN)</title>
<link rel="shortcut icon" href=/favicon.ico>
<meta charset=utf-8>
<meta name=generator content="Hugo 0.92.1">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Julien Leroy">
<meta name=description content="Gives technical details on how this blog was set up">
<link rel=stylesheet href=https://leroyj.github.io/css/main.min.59cc678e5be3e25ab7368d36560b79af9a267f36ee8a396fc27a166261791ebd.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4K18JZ28X6"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-4K18JZ28X6',{anonymize_ip:!0})}</script>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="🏗️ How this blog was set up">
<meta name=twitter:description content="Gives technical details on how this blog was set up">
<meta property="og:title" content="🏗️ How this blog was set up">
<meta property="og:description" content="Gives technical details on how this blog was set up">
<meta property="og:type" content="article">
<meta property="og:url" content="https://leroyj.github.io/en/posts/howto/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-10-12T15:28:09+02:00">
<meta property="article:modified_time" content="2021-10-12T15:28:09+02:00"><meta property="og:site_name" content="My Tech Blog (EN)">
</head>
<body>
<header class=app-header>
<a href=https://leroyj.github.io/><img class=app-header-avatar src=/avatar.jpg alt="Julien Leroy"></a>
<h2>My Tech Blog (EN)</h2>
<nav class=app-header-menu>
<a class=app-header-menu-item href=/en>Home</a>
-
<a class=app-header-menu-item href=/en/tags/>Tags</a>
-
<a class=app-header-menu-item href=/en/about>About</a>
</nav>
<p>I am a tech dino and this is my story</p>
<div class=app-header-social>
<a href=https://twitter.com/leroyj target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>My Twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a>
<a href=https://github.com/leroyj target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>My Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
</div>
<ul>
<li class=posts-list-item><a href=https://leroyj.github.io/fr/>French</a></li>
<li class=posts-list-item><a href=https://leroyj.github.io/en/>English</a></li>
</ul>
</header>
<main class=app-container>
<article class=post>
<header class=post-header>
<h1 class=post-title>🏗️ How this blog was set up</h1>
<div class=post-meta>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Oct 12, 2021
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
4 min read
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=https://leroyj.github.io/en/tags/howto/>Howto</a>
<a class=tag href=https://leroyj.github.io/en/tags/hugo/>Hugo</a>
</div>
</div>
</header>
<div class=post-content>
<p><em>Aren&rsquo;t we here to talk about technology?</em></p>
<h2 id=my-needs>My needs</h2>
<p>I&rsquo;m looking for a solution with no maintenance that helps me to focus on writing content and not maintaining the full system. So don&rsquo;t expect a microservice architectured CMS on AWS Lambda though we might use it for some projects later :)<br>
I also want a system with multilingual support to write in Globish 🇬🇧🇺🇸 and French 🇫🇷.</p>
<p>This fits completely the architecture pattern called <a href=https://jamstack.org/>Jamstack (Javascript, API, Markup stack)</a> that sits on top of pre-rendering and decoupling.</p>
<h2 id=hugo-a-static-website-generator>Hugo: a static website generator</h2>
<figure><img src=https://upload.wikimedia.org/wikipedia/commons/a/af/Logo_of_Hugo_the_static_website_generator.svg alt="Logo of the Hugo project" height=100><figcaption>
<h4>Logo of the Hugo project</h4>
</figcaption>
</figure>
<p>This blog is generated by <a href=https://gohugo.io/>Hugo</a> which is a nice static website generator like <a href=https://jekyllrb.com/>Jekyll</a> or <a href=https://www.gatsbyjs.com/>Gatsby</a>.<br>
It takes simple <a href=https://en.wikipedia.org/wiki/Markdown>Markdown (md)</a> files as input and generates your website structure with nice, optimized and fast html files. (don&rsquo;t blame hugo on the accessibility, it&rsquo;s something I need to work on)</p>
<figure><img src=/performance.png alt="Look at these amazing performances!" height=250><figcaption>
<h4>Look at these amazing performances!</h4>
</figcaption>
</figure>
<p>By static, it means that no machine or VM is required to run it. You just need to host the files on a <em>&ldquo;dumb&rdquo;</em> http drive.
This implies low resources to host and low resources on local machine.</p>
<h2 id=-theme>🎨 Theme</h2>
<p>I&rsquo;m using the <a href=https://themes.gohugo.io/themes/hugo-theme-m10c/>m10c</a> theme slightly customized that I found simple and elegant. I&rsquo;ve only tweaked the colors, changed the avatar and modified the list template to add the description.</p>
<p><a href=https://sass-lang.com/>Sass</a> is needed to modify the scss files.
You can do it easily on a Mac if you already have npm installed.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm -g sass
</code></pre></div><p>The few ticks I&rsquo;ve set in place are:</p>
<h2 id=-multilingual-support>🇫🇷🇺🇸 Multilingual support</h2>
<p>In order to setup the multilingual support, you need to configure the menu, duplicate the content and add some link to help the user to switch from a language to another.</p>
<p>Unfortunatly, when using multilingual support, the customized 404 page is not working really well with <strong>GitHub Pages</strong>.
<strong>GitHub Pages</strong> only supports a unique 404 page named <code>404.html</code> at the root of the repo.
The only way then is to copy the 404 of the language you&rsquo;ve chosen and move it at the root folder.
Fortunately this can be automated in the <strong>GitHub Actions</strong> as we will see in the following section.</p>
<h2 id=-deployment-chain>🏗️ Deployment chain</h2>
<figure><img src=../deploy_workflow.drawio.png alt="deployment chain diagram" height=200><figcaption>
<h4>deployment chain diagram</h4>
</figcaption>
</figure>
<p>I&rsquo;ve chosen Github Page as my hosting solution. It is as simple as copy and past the content of the code generated by hugo (usually the <code>public</code> folder) and paste it in your <code>&lt;nickname>.github.io</code> repo.
To automate the process you can use a repo for the source of your blog content and use <strong>Github Actions</strong> to automate the deployment.
You can follow this <a href=https://ruddra.com/hugo-deploy-static-page-using-github-actions/>tutorial to integrate Hugo in GitHub</a>.
To fix the 404 page issues discussed above, I&rsquo;ve just added a step in the <code>.github/workflows/gh-pages.yml</code> to copy the English 404.html at the root as seen below.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span></span><span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></span><span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span></span><span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span></span><span style=display:block;width:100%;background-color:#3c3d38><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span></span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>

<span style=display:block;width:100%;background-color:#3c3d38>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>copy 404 from en language to root</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>canastro/copy-file-action@master</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#f92672>with</span>:
</span><span style=display:block;width:100%;background-color:#3c3d38>          <span style=color:#f92672>source</span>: <span style=color:#e6db74>&#34;./public/en/404.html&#34;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>          <span style=color:#f92672>target</span>: <span style=color:#e6db74>&#34;./public/404.html&#34;</span>
</span>
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.ref == &#39;refs/heads/main&#39;</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>deploy_key</span>: <span style=color:#ae81ff>${{ secrets.ACTIONS_DEPLOY_KEY }}</span>
          <span style=color:#f92672>external_repository</span>: <span style=color:#ae81ff>leroyj/leroyj.github.io</span>
          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=google-analytics-support-1>Google Analytics support <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></h2>
<p>To follow my tiny audience, I&rsquo;ve setup Google Analytices as this is the tool I know and that I can set up for free.
This is really straight forward to configure as you just have to add <code>googleAnalytics = 'G-YOURGAID'</code> to your <code>config.toml</code> file.</p>
<h2 id=todo>TODO</h2>
<p>There are still a lot to do in order to make this blog fancier.<br>
My todo list so far is:</p>
<ul>
<li>set up my CMP to support <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX%3A32016R0679">European General Data Privacy Regulation (GDPR)</a> 🇪🇺</li>
<li>Add images</li>
<li>improve accessibility</li>
<li>Try the forestry cms for hugo</li>
<li>Try the ecommerce part for fun and not profit as <a href=https://snipcart-hugo-forestry.netlify.app/>snipcart</a> 💵</li>
</ul>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>I only use Google Analytics for basic anonymous audience measurement. The configuration was tailored to explicitely avoid targeting and advertising. I will publish the details in a further post.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
<div class=post-footer>
<h4></h4>
<ul>
<li>
<a href=https://leroyj.github.io/fr/posts/howto/>fr: 🏗️ Comment ce blog a été bâti ()</a>
</li>
</ul>
</div>
</article>
</main>
</body>
</html>